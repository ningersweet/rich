# æ¯”ç‰¹å¸åˆçº¦é‡åŒ–äº¤æ˜“ç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºæœºå™¨å­¦ä¹ çš„æ¯”ç‰¹å¸æ°¸ç»­åˆçº¦é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œé‡‡ç”¨**ç›ˆäºæ¯”é©±åŠ¨çš„ä¸¤é˜¶æ®µé¢„æµ‹æ¶æ„**ï¼Œåœ¨ç†Šå¸‚ç¯å¢ƒä¸‹å®ç°äº†**81.25%èƒœç‡**å’Œ**81.20%å¹´åŒ–æ”¶ç›Š**ï¼ˆ10%ä»“ä½ï¼‰ã€‚ç³»ç»Ÿä½¿ç”¨LightGBMæ¨¡å‹ï¼Œæ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²ã€‚

### ğŸ¯ æ ¸å¿ƒç­–ç•¥ï¼šç›ˆäºæ¯”é©±åŠ¨ (Risk-Reward Driven)

**ç­–ç•¥ç†å¿µï¼š** ä¸è¿½æ±‚é«˜é¢‘äº¤æ˜“ï¼Œåªåœ¨é«˜ç›ˆäºæ¯”ï¼ˆRR>2.0ï¼‰ä¸”é«˜æ¦‚ç‡ï¼ˆ>65%ï¼‰æ—¶äº¤æ˜“

**ä¸¤é˜¶æ®µæ¶æ„ï¼š**
1. **é˜¶æ®µ1 - ç›ˆäºæ¯”é¢„æµ‹**ï¼šé¢„æµ‹æ¯ç¬”äº¤æ˜“çš„æ½œåœ¨ç›ˆäºæ¯”ï¼ˆRMSE 5.3ï¼‰
2. **é˜¶æ®µ2 - æ–¹å‘+å‘¨æœŸé¢„æµ‹**ï¼šåªå¯¹é«˜RRæ ·æœ¬é¢„æµ‹æ–¹å‘å’Œæœ€ä½³æŒæœ‰å‘¨æœŸï¼ˆå‡†ç¡®ç‡64%ï¼‰

**æ ¸å¿ƒåˆ›æ–°ï¼š**
- ğŸ“Š **åŠ¨æ€ç›®æ ‡æ”¶ç›Š**ï¼šmax(1%, 1Ã—ATR) - æ ¹æ®å¸‚åœºæ³¢åŠ¨è‡ªé€‚åº”
- â±ï¸ **æŒæœ‰å‘¨æœŸé¢„æµ‹**ï¼šæ¨¡å‹é¢„æµ‹æœ€ä½³å¹³ä»“æ—¶æœºï¼ˆå¹³å‡18æ ¹Kçº¿ï¼‰
- ğŸ¯ **é«˜è´¨é‡äº¤æ˜“ç­›é€‰**ï¼š90%æ ·æœ¬RR>2.0ï¼Œä¸¥æ ¼æ§åˆ¶å…¥åœºæ¡ä»¶
- ğŸ”„ **åŒå‘äº¤æ˜“**ï¼šæ”¯æŒåšå¤šå’Œåšç©ºï¼Œç†Šå¸‚æœŸé—´åšç©ºå ä¼˜ï¼ˆ53.7%ï¼‰

### ğŸ“ˆ å›æµ‹æ€§èƒ½ï¼ˆ2025-2026ç†Šå¸‚ï¼‰

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **èƒœç‡** | **81.25%** | ç›®æ ‡45%ï¼Œè¶…è¶Š36.25% |
| **å¹´åŒ–æ”¶ç›Š** | **81.20%** | 10%ä»“ä½é…ç½® |
| **æœ€å¤§å›æ’¤** | **-0.21%** | é£é™©æä½ |
| **å®é™…ç›ˆäºæ¯”** | **2.91** | æ¥è¿‘é¢„æœŸ3.0 |
| **äº¤æ˜“æ¬¡æ•°** | 1,024ç¬” | 474åšå¤š + 550åšç©º |
| **é£é™©æ”¶ç›Šæ¯”** | 386.7 | æ”¶ç›Š/å›æ’¤ |
| **è¶…é¢æ”¶ç›Š** | +106.01% | vs ä¹°å…¥æŒæœ‰-24.81% |

### ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§

- ğŸ¤– **æœºå™¨å­¦ä¹ å¼•æ“**ï¼šLightGBMä¸¤é˜¶æ®µæ¨¡å‹ï¼ˆç›ˆäºæ¯”â†’æ–¹å‘+å‘¨æœŸï¼‰
- ğŸ“Š **ç‰¹å¾å·¥ç¨‹**ï¼š41ä¸ªæŠ€æœ¯æŒ‡æ ‡ï¼ˆMACDã€RSIã€KDJã€å¸ƒæ—å¸¦ç­‰ï¼‰
- ğŸ” **é£é™©ç®¡ç†**ï¼šä¸¥æ ¼çš„RRå’Œæ¦‚ç‡é˜ˆå€¼ç­›é€‰
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDockerä¸€é”®éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»
- ğŸ“ **å®Œæ•´æ—¥å¿—**ï¼šäº¤æ˜“å†³ç­–å’Œæ‰§è¡Œå…¨ç¨‹è®°å½•

### âš™ï¸ æ¨èé…ç½®å‚æ•°

- **Kçº¿å‘¨æœŸ**: 15åˆ†é’Ÿ
- **ä»“ä½æ¯”ä¾‹**: 10% ï¼ˆ81%å¹´åŒ–æ”¶ç›Šï¼‰
- **RRé˜ˆå€¼**: 2.0 ï¼ˆåªäº¤æ˜“ç›ˆäºæ¯”>2çš„æœºä¼šï¼‰
- **æ¦‚ç‡é˜ˆå€¼**: 65% ï¼ˆæ–¹å‘é¢„æµ‹ç½®ä¿¡åº¦è¦æ±‚ï¼‰
- **ç›®æ ‡æ”¶ç›Š**: 1% ï¼ˆåŠ¨æ€è°ƒæ•´ï¼‰
- **æœ€å¤§æŒæœ‰å‘¨æœŸ**: 50æ ¹Kçº¿

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
rich/
â”œâ”€â”€ btc_quant/                      # æ ¸å¿ƒé‡åŒ–äº¤æ˜“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py               # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ backtest.py               # å›æµ‹å¼•æ“ï¼ˆ194è¡Œï¼‰
â”‚   â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†ï¼ˆ92è¡Œï¼‰
â”‚   â”œâ”€â”€ data.py                   # æ•°æ®ä¸‹è½½ä¸ç®¡ç†ï¼ˆ411è¡Œï¼‰
â”‚   â”œâ”€â”€ features.py               # ç‰¹å¾å·¥ç¨‹ï¼ˆ235è¡Œï¼‰
â”‚   â”œâ”€â”€ risk_reward_labels.py     # ğŸ¯ ç›ˆäºæ¯”æ ‡ç­¾æ„å»ºï¼ˆ311è¡Œï¼‰
â”‚   â”œâ”€â”€ risk_reward_model.py      # ğŸ¯ ä¸¤é˜¶æ®µæ¨¡å‹ï¼ˆ531è¡Œï¼‰
â”‚   â”œâ”€â”€ model.py                  # åŸºç¡€æ¨¡å‹è®­ç»ƒï¼ˆ80è¡Œï¼‰
â”‚   â”œâ”€â”€ signals.py                # äº¤æ˜“ä¿¡å·ç”Ÿæˆï¼ˆ127è¡Œï¼‰
â”‚   â”œâ”€â”€ execution.py              # è®¢å•æ‰§è¡Œï¼ˆ85è¡Œï¼‰
â”‚   â”œâ”€â”€ position.py               # ä»“ä½ç®¡ç†ï¼ˆ44è¡Œï¼‰
â”‚   â””â”€â”€ monitor.py                # æ—¥å¿—ç›‘æ§ï¼ˆ30è¡Œï¼‰
â”‚
â”œâ”€â”€ data/                         # å†å²æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ daily/                    # æŒ‰å¤©å­˜å‚¨çš„Kçº¿æ•°æ®
â”‚   â”‚   â””â”€â”€ BTCUSDT_15m/          # 15åˆ†é’ŸKçº¿ï¼Œæ¯å¤©ä¸€ä¸ªparquetæ–‡ä»¶
â”‚   â”œâ”€â”€ BTCUSDT_15m.parquet       # åˆå¹¶åçš„å®Œæ•´æ•°æ®ï¼ˆ214,080æ¡ï¼‰
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ models/                       # è®­ç»ƒæ¨¡å‹å­˜å‚¨
â”‚   â”œâ”€â”€ risk_reward_strategy/     # ğŸ¯ ç›ˆäºæ¯”é©±åŠ¨æ¨¡å‹ï¼ˆæœ€æ–°ï¼‰
â”‚   â”‚   â”œâ”€â”€ stage1_rr_model.pkl   # é˜¶æ®µ1ï¼šç›ˆäºæ¯”é¢„æµ‹
â”‚   â”‚   â””â”€â”€ stage2_dp_model.pkl   # é˜¶æ®µ2ï¼šæ–¹å‘+å‘¨æœŸé¢„æµ‹
â”‚   â”œâ”€â”€ model_latest.pkl          # åŸºç¡€æ¨¡å‹
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ logs/                         # æ—¥å¿—æ–‡ä»¶
â”‚   â”œâ”€â”€ btc_quant.log
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ backtest/                     # å›æµ‹ç»“æœå­˜å‚¨
â”‚   â”œâ”€â”€ backtest_results_*.csv    # äº¤æ˜“è®°å½•
â”‚   â”œâ”€â”€ *.png                     # å¯è§†åŒ–å›¾è¡¨
â”‚   â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.yaml                   # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ deepseek_config.yaml          # DeepSeek APIé…ç½®
â”‚
â”œâ”€â”€ ğŸš€ æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ train_and_backtest_rr_strategy.py  # ğŸ¯ ä¸»è®­ç»ƒ+å›æµ‹è„šæœ¬ï¼ˆ466è¡Œï¼‰
â”œâ”€â”€ test_leverage_positions.py         # æ æ†æµ‹è¯•è„šæœ¬ï¼ˆ271è¡Œï¼‰
â”œâ”€â”€ visualize_backtest_results.py      # å›æµ‹å¯è§†åŒ–è„šæœ¬ï¼ˆ331è¡Œï¼‰
â”œâ”€â”€ run_live.py                        # å®æ—¶äº¤æ˜“è„šæœ¬ï¼ˆ273è¡Œï¼‰
â”‚
â”œâ”€â”€ ğŸ³ Dockeréƒ¨ç½²
â”œâ”€â”€ Dockerfile                    # é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml            # ç¼–æ’é…ç½®ï¼ˆæ”¯æŒå›æµ‹/æ¨¡æ‹Ÿ/å®ç›˜ä¸‰æ¨¡å¼ï¼‰
â”œâ”€â”€ deploy.sh                     # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ .dockerignore
â”‚
â”œâ”€â”€ ğŸ“ æ–‡æ¡£
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ strategy.md                   # ç­–ç•¥è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ âš™ï¸ å…¶ä»–
â”œâ”€â”€ requirements.txt              # Pythonä¾èµ–åº“
â”œâ”€â”€ .gitignore                    # Gitå¿½ç•¥é…ç½®
â””â”€â”€ .qoder/                       # Qoderé…ç½®ç›®å½•
```

**ä»£ç ç»Ÿè®¡ï¼š**
- æ ¸å¿ƒæ¨¡å—ï¼š**2,150è¡Œ** (btc_quant/)
- æ‰§è¡Œè„šæœ¬ï¼š**1,341è¡Œ** (è®­ç»ƒ/æµ‹è¯•/å¯è§†åŒ–/å®ç›˜)
- æ€»ä»£ç é‡ï¼š**3,491è¡Œ**

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### 1. æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### ğŸ“¥ `data.py` - æ•°æ®ç®¡ç†æ¨¡å—ï¼ˆ411è¡Œï¼‰
**åŠŸèƒ½ï¼š** ä»å¸å®‰ä¸‹è½½å†å²Kçº¿æ•°æ®ï¼Œæ”¯æŒæŒ‰å¤©å­˜å‚¨å’Œæ–­ç‚¹ç»­ä¼ 

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# ä¸‹è½½å†å²Kçº¿ï¼ˆè‡ªåŠ¨æ£€æŸ¥å·²å­˜åœ¨æ•°æ®ï¼‰
download_historical_klines(cfg: Config) -> Path

# æŒ‰å¤©ä¸‹è½½Kçº¿æ•°æ®ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ 
download_klines_by_day(cfg, start_date, end_date, daily_dir) -> List[Path]

# åˆå¹¶æ—¥Kçº¿æ•°æ®ä¸ºå•ä¸ªæ–‡ä»¶
merge_daily_klines(cfg, daily_dir) -> Path

# åŠ è½½Kçº¿æ•°æ®
load_klines(cfg: Config) -> pd.DataFrame
```

**ç‰¹ç‚¹ï¼š**
- è‡ªåŠ¨è·³è¿‡å·²ä¸‹è½½çš„æ•°æ®
- ç½‘ç»œæ•…éšœè‡ªåŠ¨é‡è¯•ï¼ˆ3æ¬¡ï¼‰
- æŒ‰å¤©åˆ†å—å­˜å‚¨ï¼Œå¤±è´¥ä¸å½±å“æ•´ä½“
- æ—¶åŒºå¤„ç†ï¼šç»Ÿä¸€ä½¿ç”¨UTCæ—¶åŒº

---

#### ğŸ”§ `features.py` - ç‰¹å¾å·¥ç¨‹æ¨¡å—ï¼ˆ235è¡Œï¼‰
**åŠŸèƒ½ï¼š** æ„å»º41ä¸ªæŠ€æœ¯æŒ‡æ ‡ç‰¹å¾å’Œå¸‚åœºçŠ¶æ€ç‰¹å¾

**ç‰¹å¾åˆ—è¡¨ï¼ˆ41ä¸ªï¼‰ï¼š**
```python
åŸºç¡€ç‰¹å¾ï¼ˆ5ä¸ªï¼‰ï¼š
- return_1/3/7: 1/3/7æ ¹Kçº¿æ”¶ç›Šç‡
- hl_ratio: æœ€é«˜æœ€ä½ä»·æ¯”
- oc_ratio: å¼€ç›˜æ”¶ç›˜ä»·æ¯”

å‡çº¿ç‰¹å¾ï¼ˆ9ä¸ªï¼‰ï¼š
- ma_7/25/99: ç®€å•ç§»åŠ¨å¹³å‡çº¿
- ema_7/25/99: æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿
- close_ma_diff: æ”¶ç›˜ä»·ç›¸å¯¹å‡çº¿åç¦»

æŠ€æœ¯æŒ‡æ ‡ï¼ˆ14ä¸ªï¼‰ï¼š
- RSI: ç›¸å¯¹å¼ºå¼±æŒ‡æ•°
- ATR, atr_pct, atr_change: å¹³å‡çœŸå®æ³¢å¹…åŠå˜åŒ–
- bb_upper/lower/width/position: å¸ƒæ—å¸¦æŒ‡æ ‡
- macd/macd_signal/macd_hist/macd_hist_change: MACDæŒ‡æ ‡
- stoch_k/stoch_d: KDJæŒ‡æ ‡

åŠ¨é‡ç‰¹å¾ï¼ˆ3ä¸ªï¼‰ï¼š
- momentum_5/10/20: ä¸åŒå‘¨æœŸåŠ¨é‡

æˆäº¤é‡ç‰¹å¾ï¼ˆ4ä¸ªï¼‰ï¼š
- volume_ratio: æˆäº¤é‡æ¯”ç‡
- volume_ma_5: 5å‘¨æœŸæˆäº¤é‡å‡çº¿
- volume_change: æˆäº¤é‡å˜åŒ–ç‡
- price_volume_corr: ä»·é‡ç›¸å…³æ€§

ä»·æ ¼ä½ç½®ï¼ˆ3ä¸ªï¼‰ï¼š
- price_position: å½“å‰ä»·æ ¼åœ¨å‘¨æœŸå†…çš„ä½ç½®
- dist_to_high/low: è·ç¦»æœ€é«˜/æœ€ä½ä»·çš„è·ç¦»

å¸‚åœºçŠ¶æ€ï¼ˆ2ä¸ªï¼‰ï¼š
- volatility_regime: æ³¢åŠ¨ç‡çŠ¶æ€
- market_regime: å¸‚åœºçŠ¶æ€ï¼ˆç‰›å¸‚=1/éœ‡è¡=0/ç†Šå¸‚=-1ï¼‰
```

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# æ„å»ºç‰¹å¾å’Œæ ‡ç­¾
build_features_and_labels(cfg, klines) -> FeatureLabelData

# å¸‚åœºçŠ¶æ€åˆ†ç±»
_market_regime(df) -> pd.Series  # ç‰›å¸‚/éœ‡è¡/ç†Šå¸‚

# æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
_bollinger_bands(series, window, num_std=2.0)
_macd(series, fast=12, slow=26, signal=9)
_stochastic(high, low, close, k_window=14, d_window=3)
```

---

#### ğŸ¤– `model.py` - æ¨¡å‹è®­ç»ƒæ¨¡å—ï¼ˆ80è¡Œï¼‰
**åŠŸèƒ½ï¼š** ä½¿ç”¨LightGBMè®­ç»ƒä¸‰åˆ†ç±»æ¨¡å‹

**æ¨¡å‹é…ç½®ï¼š**
```yaml
ç®—æ³•ï¼šLightGBM GBDT
ç›®æ ‡ï¼šå¤šåˆ†ç±»ï¼ˆåšå¤š/è§‚æœ›/åšç©ºï¼‰
æ ‘æ•°é‡ï¼š200
æœ€å¤§æ·±åº¦ï¼š6
å­¦ä¹ ç‡ï¼š0.03
æ­£åˆ™åŒ–ï¼šL1=0.1, L2=0.1
äº¤å‰éªŒè¯ï¼š5æŠ˜TimeSeriesSplit
```

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# è®­ç»ƒæ¨¡å‹ï¼ˆå«äº¤å‰éªŒè¯ï¼‰
train_model(cfg, fl: FeatureLabelData) -> TrainedModel

# ä¿å­˜/åŠ è½½æ¨¡å‹
save_model(cfg, trained: TrainedModel) -> Path
load_model(cfg) -> TrainedModel
```

**è¾“å‡ºï¼š**
- æ¨¡å‹æ–‡ä»¶ï¼š`models/model_latest.pkl`
- åŒ…å«ï¼šæ¨¡å‹ã€ç‰¹å¾åˆ—è¡¨ã€æ ‡ç­¾ç¼–ç å™¨

---

#### ğŸ“¡ `signals.py` - ä¿¡å·ç”Ÿæˆæ¨¡å—ï¼ˆ127è¡Œï¼‰
**åŠŸèƒ½ï¼š** å°†æ¨¡å‹é¢„æµ‹æ¦‚ç‡è½¬æ¢ä¸ºäº¤æ˜“ä¿¡å·

**ä¿¡å·è½¬æ¢è§„åˆ™ï¼š**
```python
åšå¤šæ¡ä»¶ï¼š
- P(long) > min_prob (0.50)
- P(long) - P(short) > prob_gap_long (0.20)
- ATRåœ¨åˆç†èŒƒå›´å†…ï¼ˆ0.003 - 0.15ï¼‰
- ä»·æ ¼ä½ç½®åˆé€‚ï¼ˆ> 0.2ï¼‰
- è·ä¸Šæ¬¡ä¿¡å·è¶…è¿‡å†·å´æ—¶é—´ï¼ˆ15åˆ†é’Ÿï¼‰

åšç©ºæ¡ä»¶ï¼š
- P(short) > min_prob (0.50)
- P(short) - P(long) > prob_gap_short (0.20)
- ATRåœ¨åˆç†èŒƒå›´å†…
- ä»·æ ¼ä½ç½®åˆé€‚ï¼ˆ< 0.8ï¼‰
- è·ä¸Šæ¬¡ä¿¡å·è¶…è¿‡å†·å´æ—¶é—´

å¦åˆ™ï¼šè§‚æœ›
```

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# ç”Ÿæˆå®æ—¶ä¿¡å·
generate_signal(cfg, trained, features_df) -> Signal

# æ‰¹é‡ç”Ÿæˆå›æµ‹ä¿¡å·
generate_signals_for_backtest(cfg, trained, features, times) -> pd.Series
```

---

#### ğŸ“Š `backtest.py` - å›æµ‹å¼•æ“ï¼ˆ194è¡Œï¼‰
**åŠŸèƒ½ï¼š** æ¨¡æ‹Ÿå†å²äº¤æ˜“ï¼Œè¯„ä¼°ç­–ç•¥è¡¨ç°

**å›æµ‹æµç¨‹ï¼š**
1. éå†æ¯æ ¹Kçº¿
2. æ£€æŸ¥æ­¢æŸ/æ­¢ç›ˆ/ç§»åŠ¨æ­¢æŸ
3. æ ¹æ®ä¿¡å·å¼€ä»“/å¹³ä»“
4. è®¡ç®—æ‰‹ç»­è´¹å’Œæ»‘ç‚¹
5. æ›´æ–°æƒç›Šæ›²çº¿
6. ç»Ÿè®¡ç»©æ•ˆæŒ‡æ ‡

**åŠ¨æ€æ­¢æŸæ­¢ç›ˆï¼š**
```python
æ­¢æŸï¼šentry_price Â± 2 * ATR
æ­¢ç›ˆï¼šentry_price Â± 3 * ATR
ç§»åŠ¨æ­¢æŸï¼š1.5 * ATR
```

**ç»©æ•ˆæŒ‡æ ‡ï¼š**
- æ€»æ”¶ç›Šç‡ï¼ˆ%ï¼‰
- æœ€å¤§å›æ’¤ï¼ˆ%ï¼‰
- èƒœç‡ï¼ˆ%ï¼‰
- äº¤æ˜“ç¬”æ•°
- å•ç¬”å¹³å‡ç›ˆäº
- ç›ˆäºæ¯”
- å¤æ™®æ¯”ç‡

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# è¿è¡Œå›æµ‹
run_backtest(cfg, klines, signals, position_usdt) -> BacktestResult
```

---

#### ğŸ¯ `execution.py` - è®¢å•æ‰§è¡Œæ¨¡å—ï¼ˆ85è¡Œï¼‰
**åŠŸèƒ½ï¼š** å®ç›˜äº¤æ˜“æ—¶ä¸å¸å®‰APIäº¤äº’

**æ”¯æŒæ“ä½œï¼š**
- è·å–è´¦æˆ·ä½™é¢
- è·å–å½“å‰æŒä»“
- ä¸‹å¸‚ä»·å•ï¼ˆå¼€ä»“/å¹³ä»“ï¼‰
- è®¾ç½®æ æ†å€æ•°
- ä»“ä½æ¨¡å¼åˆ‡æ¢ï¼ˆå•å‘/åŒå‘ï¼‰

**é£é™©æ§åˆ¶ï¼š**
- å¼ºåˆ¶å¹³ä»“ç›‘æ§ï¼ˆä¿è¯é‡‘ç‡ < 2%æ—¶å¹³ä»“ï¼‰
- å•ç¬”é£é™©é™åˆ¶ï¼ˆ5%ï¼‰
- æ—¥å†…æœ€å¤§äºæŸé™åˆ¶ï¼ˆ15%ï¼‰

**æ ¸å¿ƒå‡½æ•°ï¼š**
```python
# æ‰§è¡Œäº¤æ˜“å†³ç­–
execute_signal(cfg, signal, position_manager, execution_api)

# ä¸‹å¸‚ä»·å•
place_market_order(symbol, side, quantity) -> dict

# è·å–è´¦æˆ·ä¿¡æ¯
get_account_balance() -> float
get_position(symbol) -> dict
```

---

#### ğŸ’¼ `position.py` - ä»“ä½ç®¡ç†æ¨¡å—ï¼ˆ44è¡Œï¼‰
**åŠŸèƒ½ï¼š** è·Ÿè¸ªå½“å‰æŒä»“çŠ¶æ€

**ä»“ä½ä¿¡æ¯ï¼š**
```python
class Position:
    symbol: str              # äº¤æ˜“å¯¹
    side: str                # æ–¹å‘ï¼ˆlong/shortï¼‰
    size: float              # æ•°é‡ï¼ˆå¸ï¼‰
    entry_price: float       # å¼€ä»“ä»·æ ¼
    entry_time: datetime     # å¼€ä»“æ—¶é—´
    leverage: int            # æ æ†å€æ•°
    stop_loss: float         # æ­¢æŸä»·æ ¼
    take_profit: float       # æ­¢ç›ˆä»·æ ¼
    trailing_stop: float     # ç§»åŠ¨æ­¢æŸ
```

---

#### âš™ï¸ `config.py` - é…ç½®ç®¡ç†æ¨¡å—ï¼ˆ92è¡Œï¼‰
**åŠŸèƒ½ï¼š** åŠ è½½å’Œè§£æ `config.yaml`

**é…ç½®ç»“æ„ï¼š**
```python
class Config:
    exchange: dict           # äº¤æ˜“æ‰€é…ç½®
    symbol: dict             # äº¤æ˜“å¯¹å’Œå‘¨æœŸ
    api: dict                # APIå¯†é’¥ï¼ˆæ¨¡æ‹Ÿç›˜/å®ç›˜ï¼‰
    paths: dict              # æ•°æ®/æ¨¡å‹/æ—¥å¿—è·¯å¾„
    history_data: dict       # å†å²æ•°æ®æ—¶é—´èŒƒå›´
    features: dict           # ç‰¹å¾å·¥ç¨‹å‚æ•°
    labeling: dict           # æ ‡ç­¾æ„å»ºå‚æ•°
    model: dict              # æ¨¡å‹è¶…å‚æ•°
    strategy: dict           # ä¿¡å·è½¬æ¢è§„åˆ™
    risk: dict               # é£é™©ç®¡ç†å‚æ•°
    backtest: dict           # å›æµ‹é…ç½®
    live: dict               # å®ç›˜é…ç½®
```

---

#### ğŸ“ `monitor.py` - æ—¥å¿—ç›‘æ§æ¨¡å—ï¼ˆ30è¡Œï¼‰
**åŠŸèƒ½ï¼š** è®¾ç½®æ—¥å¿—è®°å½•å™¨

**æ—¥å¿—é…ç½®ï¼š**
- åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶
- æ—¥å¿—çº§åˆ«ï¼šINFO
- æ—¥å¿—æ–‡ä»¶ï¼š`logs/btc_quant.log`
- æ ¼å¼ï¼š`æ—¶é—´æˆ³ [çº§åˆ«] æ¶ˆæ¯`

---

### 2. æ‰§è¡Œè„šæœ¬è¯´æ˜

#### ğŸ”¬ `run_backtest.py` - å›æµ‹æ‰§è¡Œè„šæœ¬ï¼ˆ105è¡Œï¼‰
**åŠŸèƒ½ï¼š** è®­ç»ƒæ¨¡å‹å¹¶åœ¨æ ·æœ¬å¤–æ•°æ®ä¸Šå›æµ‹

**æ‰§è¡Œæµç¨‹ï¼š**
```
1. ä¸‹è½½å†å²æ•°æ®ï¼ˆè‡ªåŠ¨è·³è¿‡å·²å­˜åœ¨ï¼‰
2. æ„å»ºç‰¹å¾å’Œæ ‡ç­¾ï¼ˆ41ä¸ªç‰¹å¾ï¼‰
3. åˆ’åˆ†è®­ç»ƒé›†å’Œå›æµ‹é›†
   - è®­ç»ƒé›†ï¼š2020-2024å¹´ï¼ˆ175,290æ¡ï¼‰
   - å›æµ‹é›†ï¼š2025-2026å¹´ï¼ˆ38,592æ¡ï¼‰
4. è®­ç»ƒLightGBMæ¨¡å‹ï¼ˆ5æŠ˜äº¤å‰éªŒè¯ï¼‰
5. åœ¨å›æµ‹é›†ä¸Šç”Ÿæˆä¿¡å·
6. è¿è¡Œå›æµ‹ï¼Œè¾“å‡ºç»©æ•ˆæŒ‡æ ‡
```

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# ç›´æ¥è¿è¡Œï¼ˆéœ€è¦Pythonç¯å¢ƒï¼‰
python run_backtest.py

# ä½¿ç”¨Dockerè¿è¡Œ
docker run --rm -v $(pwd):/app -v $(pwd)/data:/app/data \
  rich-backtest python run_backtest.py
```

---

#### ğŸš€ `run_live.py` - å®æ—¶äº¤æ˜“è„šæœ¬ï¼ˆ273è¡Œï¼‰
**åŠŸèƒ½ï¼š** è¿è¡Œå®ç›˜æˆ–æ¨¡æ‹Ÿç›˜äº¤æ˜“

**æ‰§è¡Œæµç¨‹ï¼š**
```
1. åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹
2. åˆå§‹åŒ–APIè¿æ¥ï¼ˆæ¨¡æ‹Ÿç›˜/å®ç›˜ï¼‰
3. å®šæ—¶è½®è¯¢ï¼ˆæ¯60ç§’ï¼‰ï¼š
   a. è·å–æœ€æ–°Kçº¿æ•°æ®
   b. æ„å»ºç‰¹å¾
   c. æ¨¡å‹é¢„æµ‹
   d. ç”Ÿæˆäº¤æ˜“ä¿¡å·
   e. æ‰§è¡Œäº¤æ˜“ï¼ˆå¦‚æœenable_trading=trueï¼‰
   f. æ›´æ–°ä»“ä½ç®¡ç†
   g. é£é™©ç›‘æ§
4. è®°å½•è¯¦ç»†æ—¥å¿—
```

**æ¨¡å¼åˆ‡æ¢ï¼š**
```bash
# æ¨¡æ‹Ÿç›˜ï¼ˆä¸çœŸå®ä¸‹å•ï¼‰
export MODE=paper
python run_live.py

# å®ç›˜ï¼ˆçœŸå®äº¤æ˜“ï¼‰
export MODE=live
python run_live.py
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶è¯¦è§£

### `config.yaml` æ ¸å¿ƒé…ç½®ï¼ˆ170è¡Œï¼‰

#### 1. äº¤æ˜“æ‰€å’Œäº¤æ˜“å¯¹é…ç½®
```yaml
exchange:
  name: "binance_futures"  # å¸å®‰æ°¸ç»­åˆçº¦

symbol:
  name: "BTCUSDT"          # æ¯”ç‰¹å¸/USDT
  interval: "15m"          # Kçº¿å‘¨æœŸï¼š15åˆ†é’Ÿ
```

#### 2. APIå¯†é’¥é…ç½®
```yaml
api:
  paper:                   # æ¨¡æ‹Ÿç›˜é…ç½®
    key: "YOUR_PAPER_KEY"
    secret: "YOUR_PAPER_SECRET"
    base_url: "https://fapi.binance.com"
  
  live:                    # å®ç›˜é…ç½®
    key: "YOUR_LIVE_KEY"
    secret: "YOUR_LIVE_SECRET"
    base_url: "https://fapi.binance.com"
  
  mode: "paper"            # å½“å‰æ¨¡å¼ï¼špaper/live
```

âš ï¸ **å®‰å…¨æç¤ºï¼š** 
- æ¨¡æ‹Ÿç›˜å»ºè®®ä½¿ç”¨åªè¯»APIå¯†é’¥
- å®ç›˜å¯†é’¥åŠ¡å¿…å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“

#### 3. å†å²æ•°æ®é…ç½®
```yaml
history_data:
  start_time: "2020-01-01T00:00:00Z"  # æ•°æ®èµ·å§‹æ—¶é—´
  end_time: "2026-02-07T00:00:00Z"    # æ•°æ®ç»“æŸæ—¶é—´
  limit: 1000                          # å•æ¬¡è¯·æ±‚Kçº¿æ•°é‡
  
  # è®­ç»ƒé›†å’Œå›æµ‹é›†åˆ†å‰²
  train_start: "2020-01-01T00:00:00Z"
  train_end: "2024-12-31T23:59:59Z"    # è®­ç»ƒåˆ°2024å¹´åº•
  backtest_start: "2025-01-01T00:00:00Z"  # å›æµ‹ä»2025å¹´å¼€å§‹
  backtest_end: "2026-02-07T00:00:00Z"
```

#### 4. ç‰¹å¾å·¥ç¨‹é…ç½®
```yaml
features:
  max_features: 50         # æœ€å¤§ç‰¹å¾æ•°
  ma_windows: [7, 25, 99]  # ç§»åŠ¨å¹³å‡çª—å£
  rsi_window: 14           # RSIå‘¨æœŸ
  atr_window: 14           # ATRå‘¨æœŸ
```

#### 5. æ ‡ç­¾æ„å»ºé…ç½®
```yaml
labeling:
  method: "future_return"  # æ ‡ç­¾æ–¹æ³•ï¼šæœªæ¥æ”¶ç›Šç‡
  horizon_bars: 4          # é¢„æµ‹å‘¨æœŸï¼š4æ ¹Kçº¿ï¼ˆ1å°æ—¶ï¼‰
  pos_threshold: 0.008     # åšå¤šé˜ˆå€¼ï¼š+0.8%
  neg_threshold: -0.008    # åšç©ºé˜ˆå€¼ï¼š-0.8%
```

#### 6. æ¨¡å‹è¶…å‚æ•°é…ç½®
```yaml
model:
  type: "lightgbm"
  params:
    num_leaves: 31         # å¶å­èŠ‚ç‚¹æ•°
    max_depth: 6           # æœ€å¤§æ·±åº¦
    learning_rate: 0.03    # å­¦ä¹ ç‡
    n_estimators: 200      # æ ‘çš„æ•°é‡
    reg_alpha: 0.1         # L1æ­£åˆ™åŒ–
    reg_lambda: 0.1        # L2æ­£åˆ™åŒ–
  train:
    cv_folds: 5            # äº¤å‰éªŒè¯æŠ˜æ•°
```

#### 7. ä¿¡å·ç­–ç•¥é…ç½®
```yaml
strategy:
  min_prob: 0.50           # æœ€å°é¢„æµ‹æ¦‚ç‡
  prob_gap_long: 0.20      # åšå¤šæ¦‚ç‡å·®
  prob_gap_short: 0.20     # åšç©ºæ¦‚ç‡å·®
  signal_cooldown_minutes: 15  # ä¿¡å·å†·å´æ—¶é—´
  min_atr_pct: 0.003       # æœ€å°æ³¢åŠ¨ç‡
  max_atr_pct: 0.15        # æœ€å¤§æ³¢åŠ¨ç‡
```

#### 8. é£é™©ç®¡ç†é…ç½®
```yaml
risk:
  max_leverage: 40         # æœ€å¤§æ æ†å€æ•°
  risk_per_trade: 0.05     # å•ç¬”é£é™©ï¼š5%
  max_daily_loss_pct: 0.15 # æ—¥å†…æœ€å¤§äºæŸï¼š15%
  max_open_positions: 1    # æœ€å¤§æŒä»“æ•°
  liquidation_margin_ratio: 0.02  # å¼ºå¹³å®‰å…¨çº¿ï¼š2%
```

âš ï¸ **é£é™©æç¤ºï¼š**
- 40å€æ æ†é£é™©æé«˜ï¼Œç»´æŒä¿è¯é‡‘ç‡ä»…0.5%
- å½“ä¿è¯é‡‘ç‡ < 2%æ—¶ä¼šè‡ªåŠ¨å¹³ä»“
- å»ºè®®æ–°æ‰‹ä»ä½æ æ†ï¼ˆ5-10å€ï¼‰å¼€å§‹

#### 9. å›æµ‹é…ç½®
```yaml
backtest:
  initial_balance: 1000.0  # åˆå§‹èµ„é‡‘ï¼š1000 USDT
  fee_rate: 0.0004         # æ‰‹ç»­è´¹ç‡ï¼š0.04%
  slippage: 0.0005         # æ»‘ç‚¹ï¼š0.05%
  
  # åŠ¨æ€æ­¢æŸæ­¢ç›ˆ
  use_stop_loss: true
  stop_loss_atr_multiplier: 2.0    # æ­¢æŸ = 2å€ATR
  use_take_profit: true
  take_profit_atr_multiplier: 3.0  # æ­¢ç›ˆ = 3å€ATR
  use_trailing_stop: true
  trailing_stop_atr_multiplier: 1.5  # ç§»åŠ¨æ­¢æŸ = 1.5å€ATR
```

#### 10. å®ç›˜é…ç½®
```yaml
live:
  poll_interval_seconds: 60  # è½®è¯¢é—´éš”ï¼š60ç§’
  max_new_bars: 500          # æ¯æ¬¡æœ€å¤šæ‹‰å–500æ ¹Kçº¿
```

---

## ğŸ³ Docker éƒ¨ç½²

### 1. Dockerfileï¼ˆ37è¡Œï¼‰

```dockerfile
FROM python:3.10-slim

WORKDIR /app

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    TZ=UTC

# å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆç¼–è¯‘LightGBMéœ€è¦ï¼‰
RUN apt-get update && \
    apt-get install -y --no-install-recommends gcc g++ && \
    rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY btc_quant/ ./btc_quant/
COPY config.yaml run_backtest.py run_live.py ./

# åˆ›å»ºå¿…è¦ç›®å½•
RUN mkdir -p data models logs

CMD ["python", "run_live.py"]
```

### 2. docker-compose.ymlï¼ˆ89è¡Œï¼‰

æä¾›ä¸‰ç§æœåŠ¡ï¼š

#### **å›æµ‹æœåŠ¡ï¼ˆbacktestï¼‰**
```yaml
services:
  backtest:
    build: .
    container_name: btc_quant_backtest
    command: python run_backtest.py
    volumes:
      - ./config.yaml:/app/config.yaml:ro
      - ./data:/app/data
      - ./models:/app/models
      - ./logs:/app/logs
    restart: "no"  # å›æµ‹å®Œæˆåä¸é‡å¯
```

#### **æ¨¡æ‹Ÿç›˜æœåŠ¡ï¼ˆpaper_tradingï¼‰**
```yaml
  paper_trading:
    build: .
    container_name: btc_quant_paper
    command: python run_live.py
    environment:
      - MODE=paper
    restart: unless-stopped
    healthcheck:
      interval: 60s
      timeout: 10s
      retries: 3
```

#### **å®ç›˜æœåŠ¡ï¼ˆlive_tradingï¼‰**
```yaml
  live_trading:
    build: .
    container_name: btc_quant_live
    command: python run_live.py
    environment:
      - MODE=live
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G
```

### 3. ä¸€é”®éƒ¨ç½²è„šæœ¬ `deploy.sh`ï¼ˆ229è¡Œï¼‰

**åŠŸèƒ½ï¼š**
- æ£€æŸ¥Dockerç¯å¢ƒ
- æ„å»ºé•œåƒ
- è¿è¡Œå›æµ‹/æ¨¡æ‹Ÿç›˜/å®ç›˜
- æŸ¥çœ‹æ—¥å¿—
- åœæ­¢/æ¸…ç†æœåŠ¡

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x deploy.sh

# æ„å»ºé•œåƒ
./deploy.sh build

# è¿è¡Œå›æµ‹
./deploy.sh backtest

# å¯åŠ¨æ¨¡æ‹Ÿç›˜
./deploy.sh paper

# å¯åŠ¨å®ç›˜ï¼ˆè°¨æ…ï¼‰
./deploy.sh live

# æŸ¥çœ‹æ—¥å¿—
./deploy.sh logs paper_trading

# åœæ­¢æ‰€æœ‰æœåŠ¡
./deploy.sh stop

# æ¸…ç†æ‰€æœ‰
./deploy.sh clean
```

---

## ğŸ“¦ ä¾èµ–åº“è¯´æ˜

### `requirements.txt`ï¼ˆ25è¡Œï¼‰

```txt
# æ ¸å¿ƒæ•°æ®å¤„ç†
numpy>=1.21.0,<2.0.0       # æ•°å€¼è®¡ç®—
pandas>=1.3.0,<3.0.0       # æ•°æ®å¤„ç†

# æœºå™¨å­¦ä¹ ï¼ˆCPUå‹å¥½ï¼‰
lightgbm>=3.3.0,<5.0.0     # LightGBMæ¨¡å‹
scikit-learn>=1.0.0,<2.0.0 # äº¤å‰éªŒè¯ã€æ ‡ç­¾ç¼–ç 

# é…ç½®ç®¡ç†
pyyaml>=6.0,<7.0.0         # YAMLé…ç½®è§£æ

# HTTPè¯·æ±‚ï¼ˆå¸å®‰APIï¼‰
requests>=2.27.0,<3.0.0    # APIè¯·æ±‚

# æ¨¡å‹æŒä¹…åŒ–
joblib>=1.1.0,<2.0.0       # æ¨¡å‹ä¿å­˜/åŠ è½½

# æ•°æ®å­˜å‚¨
pyarrow>=10.0.0,<15.0.0    # Parquetæ ¼å¼æ”¯æŒ
```

**å®‰è£…ï¼š**
```bash
pip install -r requirements.txt
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šé…ç½®APIå¯†é’¥
ç¼–è¾‘ `config.yaml`ï¼š
```yaml
api:
  paper:
    key: "YOUR_PAPER_KEY"      # å¡«å†™æ¨¡æ‹Ÿç›˜å¯†é’¥
    secret: "YOUR_PAPER_SECRET"
  mode: "paper"                 # ä½¿ç”¨æ¨¡æ‹Ÿç›˜
```

#### æ­¥éª¤2ï¼šæ„å»ºé•œåƒ
```bash
chmod +x deploy.sh
./deploy.sh build
```

#### æ­¥éª¤3ï¼šè¿è¡Œå›æµ‹
```bash
./deploy.sh backtest
```

**é¢„æœŸè¾“å‡ºï¼š**
```
[1/5] ä¸‹è½½å†å²æ•°æ®...
Kçº¿æ•°æ®å·²å­˜åœ¨ï¼Œè·³è¿‡ä¸‹è½½: /app/data/BTCUSDT_15m.parquet
æ•°æ®æ—¶é—´èŒƒå›´: 2020-01-01 ~ 2026-02-07
æ•°æ®æ¡æ•°: 214,080 æ¡

[2/5] æ„å»ºç‰¹å¾ä¸æ ‡ç­¾...
ç‰¹å¾çŸ©é˜µå½¢çŠ¶: (213979, 41), æ ‡ç­¾æ•°é‡: (213979,)

[3/5] åˆ’åˆ†è®­ç»ƒé›†å’Œå›æµ‹é›†...
è®­ç»ƒé›†: 2020-2024å¹´, å…± 175,290 æ¡Kçº¿
å›æµ‹é›†: 2025-2026å¹´, å…± 38,592 æ¡Kçº¿ï¼ˆæ ·æœ¬å¤–æ•°æ®ï¼‰

[4/5] è®­ç»ƒæ¨¡å‹ï¼ˆCPUå‹å¥½LightGBMï¼‰...
Fold 1 accuracy: 73.0%
Fold 2 accuracy: 83.1%
Fold 3 accuracy: 90.5%
Fold 4 accuracy: 94.7%
Fold 5 accuracy: 89.6%
æ¨¡å‹å·²ä¿å­˜: /app/models/model_latest.pkl

[5/5] åœ¨å›æµ‹é›†ä¸Šç”Ÿæˆä¿¡å·å¹¶è¿è¡Œå›æµ‹...
å›æµ‹ç»“æŸï¼šæœ€ç»ˆæƒç›Š = XXX, æ€»æ”¶ç›Š = XX%, æœ€å¤§å›æ’¤ = XX%
```

#### æ­¥éª¤4ï¼šå¯åŠ¨æ¨¡æ‹Ÿç›˜
```bash
./deploy.sh paper
```

**æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š**
```bash
./deploy.sh logs paper_trading
```

#### æ­¥éª¤5ï¼šï¼ˆå¯é€‰ï¼‰å¯åŠ¨å®ç›˜
âš ï¸ **è­¦å‘Šï¼šå®ç›˜äº¤æ˜“æ¶‰åŠçœŸå®èµ„é‡‘ï¼Œè¯·è°¨æ…æ“ä½œï¼**

```bash
# ä¿®æ”¹é…ç½®
vim config.yaml
# è®¾ç½® api.mode: "live"
# å¡«å†™å®ç›˜APIå¯†é’¥

# å¯åŠ¨å®ç›˜
./deploy.sh live
```

---

### æ–¹æ³•2ï¼šæœ¬åœ°Pythonç¯å¢ƒ

#### æ­¥éª¤1ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

#### æ­¥éª¤2ï¼šå®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

#### æ­¥éª¤3ï¼šé…ç½®å‚æ•°
ç¼–è¾‘ `config.yaml`ï¼ˆåŒä¸Šï¼‰

#### æ­¥éª¤4ï¼šè¿è¡Œå›æµ‹
```bash
python run_backtest.py
```

#### æ­¥éª¤5ï¼šè¿è¡Œå®æ—¶äº¤æ˜“
```bash
# æ¨¡æ‹Ÿç›˜
export MODE=paper
python run_live.py

# å®ç›˜
export MODE=live
python run_live.py
```

---

## ğŸ“ˆ ç­–ç•¥ä¼˜åŒ–å†ç¨‹

### åˆå§‹ç‰ˆæœ¬ï¼ˆ1å°æ—¶Kçº¿ï¼‰
- **Kçº¿å‘¨æœŸï¼š** 1å°æ—¶
- **ç‰¹å¾æ•°ï¼š** 11ä¸ª
- **æ æ†ï¼š** 10å€
- **æ ‡ç­¾é˜ˆå€¼ï¼š** Â±0.2%
- **å›æµ‹ç»“æœï¼š** æ ·æœ¬å¤–æ”¶ç›Š **-52.17%**ï¼ˆä¸¥é‡è¿‡æ‹Ÿåˆï¼‰

### ä¼˜åŒ–ç‰ˆæœ¬1ï¼ˆå¢å¼ºç‰¹å¾ï¼‰
- **æ”¹è¿›ï¼š** ç‰¹å¾æ‰©å±•åˆ°30ä¸ªï¼Œå¢åŠ æ­£åˆ™åŒ–
- **å›æµ‹ç»“æœï¼š** æ ·æœ¬å¤–æ”¶ç›Š **-1.21%**ï¼ˆæ¥è¿‘ç›ˆäºå¹³è¡¡ï¼‰

### å½“å‰ç‰ˆæœ¬ï¼ˆ15åˆ†é’ŸKçº¿ï¼‰
- **Kçº¿å‘¨æœŸï¼š** 15åˆ†é’Ÿï¼ˆäº¤æ˜“é¢‘ç‡æå‡4å€ï¼‰
- **ç‰¹å¾æ•°ï¼š** 41ä¸ª
- **æ æ†ï¼š** 40å€
- **å•ç¬”é£é™©ï¼š** 5%
- **æ ‡ç­¾é˜ˆå€¼ï¼š** Â±0.8%
- **é¢„æµ‹å‘¨æœŸï¼š** 4æ ¹Kçº¿ï¼ˆ1å°æ—¶ï¼‰
- **å›æµ‹ç»“æœï¼š** äº¤æ˜“ä¿¡å·è¿‡å°‘ï¼Œæ¨¡å‹å‡ ä¹åªé¢„æµ‹è§‚æœ›

### å¾…ä¼˜åŒ–æ–¹å‘
1. **é™ä½ä¿¡å·é˜ˆå€¼**ï¼š`min_prob` ä»0.50é™åˆ°0.35
2. **å‡å°æ¦‚ç‡å·®**ï¼š`prob_gap` ä»0.20é™åˆ°0.10
3. **è°ƒæ•´æ ‡ç­¾é˜ˆå€¼**ï¼šÂ±0.8%æ”¹ä¸ºÂ±0.5%
4. **ç±»åˆ«å¹³è¡¡**ï¼šå¢åŠ  `scale_pos_weight` å‚æ•°
5. **ç‰¹å¾é€‰æ‹©**ï¼šä¿ç•™æœ€é‡è¦çš„20-30ä¸ªç‰¹å¾
6. **åŠ¨æ€é˜ˆå€¼**ï¼šæ ¹æ®å¸‚åœºæ³¢åŠ¨ç‡è‡ªé€‚åº”è°ƒæ•´

---

## ğŸ” å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### Q1ï¼šä¸ºä»€ä¹ˆå›æµ‹äº¤æ˜“ç¬”æ•°ä¸º0ï¼Ÿ
**Aï¼š** æ¨¡å‹è¿‡äºä¿å®ˆï¼Œå‡ ä¹åªé¢„æµ‹è§‚æœ›ä¿¡å·ã€‚éœ€è¦é™ä½ä¿¡å·é˜ˆå€¼ï¼ˆ`min_prob`å’Œ`prob_gap`ï¼‰ã€‚

### Q2ï¼šå¦‚ä½•æé«˜èƒœç‡ï¼Ÿ
**Aï¼š** 
- å¢åŠ ç‰¹å¾å·¥ç¨‹ï¼ˆæ›´å¤šæŠ€æœ¯æŒ‡æ ‡ï¼‰
- å¢å¼ºæ¨¡å‹æ­£åˆ™åŒ–ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰
- è°ƒæ•´æ ‡ç­¾é˜ˆå€¼ï¼ˆæ•æ‰æ›´å¤§æœºä¼šï¼‰
- ä½¿ç”¨æ›´é•¿çš„è®­ç»ƒæ•°æ®

### Q3ï¼šæ æ†å€æ•°å¦‚ä½•é€‰æ‹©ï¼Ÿ
**Aï¼š** 
- **æ–°æ‰‹ï¼š** 5-10å€ï¼ˆå®‰å…¨ï¼‰
- **æœ‰ç»éªŒï¼š** 20-30å€ï¼ˆå¹³è¡¡ï¼‰
- **æ¿€è¿›ï¼š** 40å€ï¼ˆé«˜é£é™©ï¼‰
- æ³¨æ„ï¼š40å€æ æ†ç»´æŒä¿è¯é‡‘ç‡ä»…0.5%ï¼Œææ˜“çˆ†ä»“

### Q4ï¼šæ•°æ®ä¸‹è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**Aï¼š** 
- ç³»ç»Ÿæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œé‡æ–°è¿è¡Œå³å¯
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å¢åŠ é‡è¯•æ¬¡æ•°ï¼ˆä¿®æ”¹ `data.py` ä¸­çš„ `max_retries`ï¼‰
- æ›´æ¢API endpointï¼ˆå›½å†…å¯èƒ½éœ€è¦ä»£ç†ï¼‰

### Q5ï¼šæ¨¡å‹è®­ç»ƒéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**Aï¼š** 
- 15åˆ†é’ŸKçº¿ï¼ˆ214,080æ¡ï¼‰ï¼šçº¦2-3åˆ†é’Ÿ
- 5æŠ˜äº¤å‰éªŒè¯
- CPUï¼šIntel i5 æˆ–ä»¥ä¸Š
- å†…å­˜ï¼šå»ºè®®4GB+

### Q6ï¼šå¦‚ä½•ç›‘æ§å®ç›˜è¿è¡ŒçŠ¶æ€ï¼Ÿ
**Aï¼š** 
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f paper_trading

# è¿›å…¥å®¹å™¨
docker exec -it btc_quant_paper bash

# æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
tail -f logs/btc_quant.log
```

### Q7ï¼šå¦‚ä½•å¤‡ä»½æ¨¡å‹å’Œæ•°æ®ï¼Ÿ
**Aï¼š** 
```bash
# å¤‡ä»½æ¨¡å‹
cp models/model_latest.pkl models/model_backup_$(date +%Y%m%d).pkl

# å¤‡ä»½æ•°æ®
tar -czf data_backup.tar.gz data/

# å¤‡ä»½é…ç½®
cp config.yaml config_backup_$(date +%Y%m%d).yaml
```

### Q8ï¼šæ¨¡æ‹Ÿç›˜å’Œå®ç›˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**Aï¼š** 
| é¡¹ç›® | æ¨¡æ‹Ÿç›˜ | å®ç›˜ |
|------|--------|------|
| APIå¯†é’¥ | åªè¯»æˆ–æµ‹è¯•ç½‘ | çœŸå®å¯†é’¥ |
| ä¸‹å• | ä¸çœŸå®ä¸‹å• | çœŸå®ä¸‹å• |
| èµ„é‡‘ | è™šæ‹Ÿèµ„é‡‘ | çœŸå®èµ„é‡‘ |
| é£é™© | é›¶é£é™© | é«˜é£é™© |
| ç”¨é€” | æµ‹è¯•ç­–ç•¥ | çœŸå®äº¤æ˜“ |

---

## âš ï¸ é£é™©è­¦ç¤º

**è¯·åœ¨ä½¿ç”¨æœ¬ç³»ç»Ÿå‰ä»”ç»†é˜…è¯»ï¼š**

1. **é«˜é£é™©æŠ•èµ„ï¼š** åŠ å¯†è´§å¸åˆçº¦äº¤æ˜“é£é™©æé«˜ï¼Œå¯èƒ½å¯¼è‡´æœ¬é‡‘å…¨éƒ¨æŸå¤±
2. **æ æ†é£é™©ï¼š** 40å€æ æ†æ„å‘³ç€ä»·æ ¼æ³¢åŠ¨2.5%å³å¯çˆ†ä»“
3. **å¸‚åœºé£é™©ï¼š** æ¨¡å‹åŸºäºå†å²æ•°æ®è®­ç»ƒï¼Œæ— æ³•é¢„æµ‹æç«¯è¡Œæƒ…ï¼ˆé»‘å¤©é¹…äº‹ä»¶ï¼‰
4. **ç­–ç•¥é£é™©ï¼š** è¿‡æ‹Ÿåˆã€å‚æ•°æ•æ„Ÿã€ä¿¡å·æ»åç­‰é—®é¢˜å¯èƒ½å¯¼è‡´äºæŸ
5. **æŠ€æœ¯é£é™©ï¼š** ç½‘ç»œæ•…éšœã€APIé™æµã€ç³»ç»Ÿå®•æœºç­‰å¯èƒ½å½±å“äº¤æ˜“æ‰§è¡Œ
6. **èµ„é‡‘ç®¡ç†ï¼š** å»ºè®®å•ç¬”é£é™©ä¸è¶…è¿‡æ€»èµ„é‡‘çš„2-5%
7. **å……åˆ†æµ‹è¯•ï¼š** å®ç›˜å‰åŠ¡å¿…åœ¨æ¨¡æ‹Ÿç›˜å……åˆ†æµ‹è¯•è‡³å°‘1-3ä¸ªæœˆ

**å…è´£å£°æ˜ï¼š**
- æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
- ä½œè€…ä¸å¯¹ä»»ä½•äº¤æ˜“æŸå¤±è´Ÿè´£
- ä½¿ç”¨æœ¬ç³»ç»Ÿè¿›è¡Œå®ç›˜äº¤æ˜“çš„ä¸€åˆ‡åæœç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…
- è¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„

---

## ğŸ“š å­¦ä¹ èµ„æº

### é‡åŒ–äº¤æ˜“åŸºç¡€
- [Binance APIæ–‡æ¡£](https://binance-docs.github.io/apidocs/futures/cn/)
- [LightGBMæ–‡æ¡£](https://lightgbm.readthedocs.io/)
- [Pandasæ—¶é—´åºåˆ—åˆ†æ](https://pandas.pydata.org/docs/user_guide/timeseries.html)

### æŠ€æœ¯æŒ‡æ ‡
- [MACDæŒ‡æ ‡è¯¦è§£](https://www.investopedia.com/terms/m/macd.asp)
- [RSIæŒ‡æ ‡è¯¦è§£](https://www.investopedia.com/terms/r/rsi.asp)
- [å¸ƒæ—å¸¦æŒ‡æ ‡è¯¦è§£](https://www.investopedia.com/terms/b/bollingerbands.asp)

### æœºå™¨å­¦ä¹ 
- [æ—¶é—´åºåˆ—äº¤å‰éªŒè¯](https://scikit-learn.org/stable/modules/cross_validation.html#time-series-split)
- [å¤šåˆ†ç±»æ¨¡å‹è¯„ä¼°](https://scikit-learn.org/stable/modules/model_evaluation.html)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

### æŠ¥å‘Šé—®é¢˜
- åœ¨GitHub Issuesä¸­æè¿°é—®é¢˜
- æä¾›è¯¦ç»†çš„å¤ç°æ­¥éª¤
- é™„ä¸Šæ—¥å¿—æ–‡ä»¶å’Œé…ç½®å‚æ•°

### ä»£ç è§„èŒƒ
- ä½¿ç”¨Python 3.10+
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- æäº¤å‰è¿è¡Œæµ‹è¯•

### åŠŸèƒ½å»ºè®®
ä¼˜å…ˆè€ƒè™‘çš„ä¼˜åŒ–æ–¹å‘ï¼š
1. å¢åŠ æ›´å¤šæŠ€æœ¯æŒ‡æ ‡ç‰¹å¾
2. æ”¯æŒæ›´å¤šäº¤æ˜“æ‰€ï¼ˆOKXã€Bybitç­‰ï¼‰
3. å®ç°å¤šå“ç§è½®åŠ¨ç­–ç•¥
4. æ·»åŠ Telegram/å¾®ä¿¡é€šçŸ¥
5. å¼€å‘Webç®¡ç†ç•Œé¢
6. å¢åŠ æ›´å¤šæ­¢æŸç­–ç•¥ï¼ˆæ—¶é—´æ­¢æŸã€æ³¢åŠ¨ç‡æ­¢æŸï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…ï¼š** lemonshwang
- **é¡¹ç›®è·¯å¾„ï¼š** `/Users/lemonshwang/project/rich`
- **æœ€åæ›´æ–°ï¼š** 2026-02-08

---

## ğŸ¯ ç‰ˆæœ¬å†å²

### v1.0.0ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
- âœ… å®Œæ•´çš„å›æµ‹æ¡†æ¶
- âœ… LightGBMä¸‰åˆ†ç±»æ¨¡å‹
- âœ… 41ä¸ªæŠ€æœ¯æŒ‡æ ‡ç‰¹å¾
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²
- âœ… æ¨¡æ‹Ÿç›˜å’Œå®ç›˜æ”¯æŒ
- âœ… åŠ¨æ€æ­¢æŸæ­¢ç›ˆ
- âœ… é£é™©ç®¡ç†æ¨¡å—
- âœ… æŒ‰å¤©æ•°æ®å­˜å‚¨ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰

### è®¡åˆ’ä¸­ï¼ˆv1.1.0ï¼‰
- ğŸ”„ é™ä½ä¿¡å·é˜ˆå€¼ï¼ˆè§£å†³äº¤æ˜“é¢‘ç‡è¿‡ä½é—®é¢˜ï¼‰
- ğŸ”„ ç±»åˆ«å¹³è¡¡ä¼˜åŒ–ï¼ˆscale_pos_weightï¼‰
- ğŸ”„ ç‰¹å¾é‡è¦æ€§åˆ†æ
- ğŸ”„ å¢åŠ Telegramé€šçŸ¥
- ğŸ”„ Webç›‘æ§ç•Œé¢

---

**ç¥äº¤æ˜“é¡ºåˆ©ï¼ğŸ’°**
